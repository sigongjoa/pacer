sequenceDiagram
    participant Student as í•™ìƒ
    participant Coach as ì½”ì¹˜ (ë³¸ì¸)
    participant Platform as í”Œë«í¼
    participant AIModule as <<Rule-Based>> AI ë¶„ì„ ëª¨ë“ˆ
    participant LLMFilter as <<V1: Judge Only>> LLM í•„í„°
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    %% --- 1. ì‹¤ì‹œê°„ ìë™í™” ë£¨í”„ (V1) ---
    loop (ì‹¤ì‹œê°„) í•™ìƒ í•™ìŠµ ë° ìë™ í•„í„°ë§
        Student->>Platform: ê³¼ì œ ì œì¶œ (ì˜¤ë‹µ ë°œìƒ)
        Platform->>AIModule: 'í•™ìƒA' ì˜¤ë‹µ ë¶„ì„ ìš”ì²­
        AIModule-->>Platform: [1ì°¨ ë¶„ì„ ë¦¬í¬íŠ¸] (ê·œì¹™ ê¸°ë°˜)
        
        Platform->>LLMFilter: [íŒë‹¨ ìš”ì²­] "error_context: {...}"
        LLMFilter-->>Platform: [íŒë‹¨ ê²°ê³¼] "decision: APPROVE"
        
        Platform->>DB: LLMì˜ [íŒë‹¨ ê²°ê³¼] ë¡œê·¸ ì €ì¥
        alt decision is APPROVE
            Platform->>AIModule: Anki ì¹´ë“œ ìƒì„± ì§€ì‹œ
            AIModule->>DB: [Anki ì¹´ë“œ] ì €ì¥
        end
    end

    %% --- 2. ì½”ì¹˜ì˜ ë¹„ë™ê¸° í”¼ë“œë°± ë£¨í”„ (V1) ---
    loop (ì£¼ 1íšŒ) ì½”ì¹˜ì˜ LLM í”¼ë“œë°±
        Platform->>Coach: [ì£¼ê°„ ì•Œë¦¼] "LLM íŒë‹¨ Nê±´ì— ëŒ€í•´ í”¼ë“œë°±í•´ì£¼ì„¸ìš”."
        
        Coach->>Platform: (ëŒ€ì‹œë³´ë“œ) LLMì˜ 'ìë™ ìŠ¹ì¸' ì´ë ¥(Log) ê²€í† 
        
        opt LLMì˜ ê²°ì •ì´ 'ë‚˜ìœ' ê²½ìš°
            Coach->>Platform: (í´ë¦­) **"íŒë‹¨ ë‚˜ì¨ ğŸ‘"** + (ì‚¬ìœ  ì„ íƒ)
            Platform->>DB: **[í”¼ë“œë°± ë¡œê·¸ ì—…ë°ì´íŠ¸]** "log_id: ..., feedback: 'BAD'"
            note right of DB: ìë™ ì¬í•™ìŠµ(X), ìˆ˜ë™ ë¶„ì„ìš© ë°ì´í„° ì¶•ì (O)
            
            Coach->>Platform: "í•´ë‹¹ Anki ì¹´ë“œ ì¦‰ì‹œ ì‚­ì œ" ìš”ì²­
            Platform->>AIModule: Anki ì¹´ë“œ ì‚­ì œ ì§€ì‹œ
            AIModule->>DB: [Anki ì¹´ë“œ] ì‚­ì œ
        else LLMì˜ ê²°ì •ì´ 'ì¢‹ì€' ê²½ìš°
            Coach->>Platform: (í´ë¦­) "íŒë‹¨ ì¢‹ìŒ ğŸ‘"
            Platform->>DB: **[í”¼ë“œë°± ë¡œê·¸ ì—…ë°ì´íŠ¸]** "log_id: ..., feedback: 'GOOD'"
        end
    end